<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>V√≤ng quay may m·∫Øn</title>
  <style>
  #codeInput {
  font-size: 22px;
  padding: 14px 18px;
  width: 80vw;
  max-width: 320px;
  border-radius: 12px;
  border: 2px solid #999;
  margin-top: 20px;
}

button {
  font-size: 22px;
  padding: 14px 22px;
  border-radius: 12px;
}
<style>
body { text-align:center; font-family:Arial; background:#fffbe6; }
#wheel {
  width:80vw;
  height:80vw;
  max-width:420px;
  max-height:420px;

  border-radius:50%;
  border:8px solid #333;
  margin:10px auto;

  background:conic-gradient(
    #ff9999 0deg 60deg,
    #99ff99 60deg 120deg,
    #9999ff 120deg 180deg,
    #ffff99 180deg 240deg,
    #ffcc99 240deg 300deg,
    #cc99ff 300deg 360deg
  );

  transition: transform 4s ease-out;
}
#pointer {
  width:0;height:0;
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-bottom:30px solid red;
  margin:0 auto;
}
</style>
</head>

<body>
<h1>üéâ V√≤ng quay may m·∫Øn üéâ</h1>

<div id="pointer"></div>
<div id="wheel"></div>

<input id="codeInput" placeholder="Nh·∫≠p m√£">
<button onclick="spin()">QUAY</button>
<p id="result"></p>

<br>

<h2 id="result"></h2>

<script>
let prizes = [
  "Freeship",
  "Gi·∫£m 50k",
  "1 ph·∫ßn ƒÉn b·∫•t k·ª≥",
  "1 ly n∆∞·ªõc b·∫•t k·ª≥",
  "Voucher 100k",
  "Ng√¥i sao may m·∫Øn",
  "T√¥m tempura",
  "G√† cay ph√¥ mai",
  "Takoyaki 6 vi√™n",
  
];
let codes = {};

for (let i = 1; i <= 500; i++) {
  let c = "CODE" + String(i).padStart(3, "0");
  codes[c] = false;
};

let angle = 0;

function spin(){
  let code = document.getElementById("codeInput").value;

  if(!(code in codes)){
    alert("M√£ kh√¥ng h·ª£p l·ªá");
    return;
  }

  if(codes[code]){
    alert("M√£ ƒë√£ d√πng");
    return;
  }

  codes[code] = true;

  let prizeIndex = Math.floor(Math.random()*prizes.length);
  let rotateDeg = 360*5 + prizeIndex*(360/prizes.length);

  angle += rotateDeg;
  document.getElementById("wheel").style.transform = "rotate("+angle+"deg)";

  setTimeout(()=>{
    let prize = prizes[prizeIndex];
    
document.getElementById("result").innerText =
  "üéÅ " + prize;
    // G·ª≠i k·∫øt qu·∫£ v·ªÅ Google Form
let url = "https://script.google.com/macros/s/AKfycbz2W8dWqA6D_H13S10lJE7c-VKyyCO0IwDH0qvtNHavkAwumCh_l5BOvfFSIK2bBYY/exec"
  + "?code=" + encodeURIComponent(code)
  + "&prize=" + encodeURIComponent(prizes[prizeIndex]);

// d√πng ·∫£nh ·∫©n ƒë·ªÉ g·ª≠i (tr√°nh l·ªói Safari)
let img = new Image();
img.src = url;
  },4000);
}
</script>

</body>
</html>
