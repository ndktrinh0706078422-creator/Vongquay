<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VÃ²ng quay may máº¯n</title>
<style>
body { text-align:center; font-family:Arial; background:#fffbe6; }
#wheel {
  width:300px; height:300px;
  border-radius:50%;
  border:8px solid #333;
  margin:20px auto;
  background:conic-gradient(
    #ff9999 0deg 60deg,
    #99ff99 60deg 120deg,
    #9999ff 120deg 180deg,
    #ffff99 180deg 240deg,
    #ffcc99 240deg 300deg,
    #cc99ff 300deg 360deg
  );
  transition: transform 4s ease-out;
}
#pointer {
  width:0;height:0;
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-bottom:30px solid red;
  margin:0 auto;
}
</style>
</head>

<body>
<h1>ðŸŽ‰ VÃ²ng quay may máº¯n ðŸŽ‰</h1>

<div id="pointer"></div>
<div id="wheel"></div>

<br>
<input id="codeInput" placeholder="Nháº­p mÃ£">
<button onclick="spin()">QUAY</button>

<h2 id="result"></h2>

<script>
let prizes = [
  "Freeship",
  "Giáº£m 50k",
  "1 pháº§n Äƒn báº¥t ká»³",
  "1 ly nÆ°á»›c báº¥t ká»³",
  "Voucher 100k",
  "NgÃ´i sao may máº¯n",
  "TÃ´m tempura",
  "GÃ  cay phÃ´ mai",
  "Takoyaki 6 viÃªn",
  
];
let codes = {};

for (let i = 1; i <= 500; i++) {
  let c = "CODE" + String(i).padStart(3, "0");
  codes[c] = false;
};

let angle = 0;

function spin(){
  let code = document.getElementById("codeInput").value;

  if(!(code in codes)){
    alert("MÃ£ khÃ´ng há»£p lá»‡");
    return;
  }

  if(codes[code]){
    alert("MÃ£ Ä‘Ã£ dÃ¹ng");
    return;
  }

  codes[code] = true;

  let prizeIndex = Math.floor(Math.random()*prizes.length);
  let rotateDeg = 360*5 + prizeIndex*(360/prizes.length);

  angle += rotateDeg;
  document.getElementById("wheel").style.transform = "rotate("+angle+"deg)";

  setTimeout(()=>{
    document.getElementById("result").innerText =
      "ðŸŽ " + prizes[prizeIndex];
    // Gá»­i dá»¯ liá»‡u vÃ o Google Form tá»± Ä‘á»™ng
fetch("https://docs.google.com/forms/d/e/1FAIpQLSfc-5md1qHTlQITjo2NAa7JaveDqT22g6drfIyFxky_-2N3LQ/formResponse?entry.1160892158="
+ encodeURIComponent(code) 
+ "&entry.932048524=" + encodeURIComponent(prize))
  .then(response => {
    console.log("ÄÃ£ gá»­i káº¿t quáº£ tá»›i Google Sheets");
  })
  .catch(error => {
    console.error("Lá»—i gá»­i Sheets:", error);
  });
  },4000);
}
</script>

</body>
</html>
